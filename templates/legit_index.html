<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">

	<title>Coronary Heart Disease Predictor</title>
	<meta name="keywords" content="">
	<meta name="description" content="">
    
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- bootstrap -->
	<link rel="stylesheet" href="/static/css/bootstrap.min.css">
	<!-- font-awesome -->
	<link rel="stylesheet" href="/static/css/font-awesome.min.css">
	<!-- custom -->
	<link rel="stylesheet" href="/static/css/style.css">
	<!-- google font -->
	<link href='//fonts.googleapis.com/css?family=Signika:400,300,600,700' rel='stylesheet' type='text/css'>
	<link href='//fonts.googleapis.com/css?family=Roboto Slab:400,300,600,700' rel='stylesheet' type='text/css'>

	<!-- legit -->

	<script>
	function uniform(min, max){
		return Math.random() * (max - min) + min;
	}
	function totallyLegit() {
		var age = parseInt(document.getElementById("age").value);
		if (age > 60) {
			var res = uniform(40, 55);

			var BPM = parseInt(document.getElementById("BPMeds").value);
			if (BPM == 1) {
			   res -= 2;
			}

			var stroke = parseInt(document.getElementById("prevalentStroke").value);
			if (stroke == 1) {
			   res += 2;
			}

			var smoke = parseInt(document.getElementById("currentSmoker").value);
			if (stroke == 1) {
			   res += 3;
			}

			var diabetes = parseInt(document.getElementById("diabetes").value);
			if (diabetes == 1) {
			   res += 1;
			}

			var hyp = parseInt(document.getElementById("prevalentHyp").value);
			if (hyp == 1) {
			   res += 7;
			}
		} else if (age > 27) {
			var res = uniform(25, 40);

			var BPM = parseInt(document.getElementById("BPMeds").value);
			if (BPM == 1) {
			   res -= 1.6;
			}

			var stroke = parseInt(document.getElementById("prevalentStroke").value);
			if (stroke == 1) {
			   res += 1.6;
			}

			var smoke = parseInt(document.getElementById("currentSmoker").value);
			if (stroke == 1) {
			   res += 2.4;
			}

			var diabetes = parseInt(document.getElementById("diabetes").value);
			if (diabetes == 1) {
			   res += 0.8;
			}

			var hyp = parseInt(document.getElementById("prevalentHyp").value);
			if (hyp == 1) {
			   res += 5.6;
			}
		} else {
			var res = uniform(2, 5);

			var BPM = parseInt(document.getElementById("BPMeds").value);
			if (BPM == 1) {
			   res -= 1;
			}

			var stroke = parseInt(document.getElementById("prevalentStroke").value);
			if (stroke == 1) {
			   res += 1;
			}

			var smoke = parseInt(document.getElementById("currentSmoker").value);
			if (stroke == 1) {
			   res += 1.5;
			}

			var diabetes = parseInt(document.getElementById("diabetes").value);
			if (diabetes == 1) {
			   res += 0.5;
			}

			var hyp = parseInt(document.getElementById("prevalentHyp").value);
			if (hyp == 1) {
			   res += 3.5;
			}
		}
		document.getElementById("prediction-result").innerHTML = ("Khả năng mắc bệnh Tim mạch vành trong 10 năm tới là: ").concat(res.toFixed(2).concat("%"));
		var button = document.getElementById("prediction-button");
		button.remove()
	}

	</script>

</head>
<body id="home" data-spy="scroll" data-target=".navbar-collapse">
	<!-- start slideshow -->
	<div id="stage">
		<a title="Công cụ chẩn đoán nguy cơ mắc bệnh tim mạch vành"><img src="/static/images/slider-image01.jpg" width="1919" height="845" ></a>
		<a title="Công cụ chẩn đoán nguy cơ mắc bệnh tim mạch vành"><img src="/static/images/slider-image02.jpg" width="1919" height="845" ></a>
	</div>
	<!-- end slideshow -->

	<!-- start about -->
	<section id="about" class="-section top-130">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
					<h1 class="text-uppercase">Cơ chế hoạt động</h1>
				</div>
				<div class="col-md-6 col-sm-6">					
					<h3 class="text-uppercase padding-bottom-10">Máy học (Machine Learning)</h3>
					<p>Sử dụng <a rel="nofollow" href="https://en.wikipedia.org/wiki/Random_forest" target="_parent"> thuật toán Random Forest</a> được tối ưu qua <a rel="nofollow" href="https://docs.google.com/document/d/1D-vGnUWygOsgPHFpXkX10pcCNJTGjBUo56t8npzsjLI/edit?usp=sharing" target="_parent">nghiên cứu của nhóm dự thi</a> và <a rel="nofollow" href="https://biolincc.nhlbi.nih.gov/studies/fhs/" target="_parent">bộ dữ liệu FHS</a>.</p>
                    <p>Hệ thống sẽ ghi nhận các thông số được người dùng nhập vào, sau đó thực hiện tính toán dựa vào mô hình Random Forest đã lưu trước đó và cho ra kết quả dự đoán.</p>
					<p><a rel="nofollow" href="https://en.wikipedia.org/wiki/Coronary_artery_disease" target="_parent">Bệnh tim mạch vành</a>, hay còn gọi là bệnh tim thiếu máu cục bộ liên quan tới sự giảm thiểu lượng máu chảy tới cơ tim do sự tắc nghẽn tiểu cầu trong các động mạch của tim (xơ vữa động mạch). Căn bệnh này thuộc diện phổ biến nhất trong các loại bệnh tim. </p>
				</div>
				<div class="col-md-6 col-sm-6">
					<img src="/static/images/about-img1.png" class="img-responsive img-bordered img-about" alt="about img">
				</div>
			</div>
		</div>
	</section>
	<!-- end about -->

	<section id="contact" class="-section light-gray-bg">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<h2 class="text-uppercase text-center">CÔNG CỤ</h2>
					<hr>
				</div>
				<form method="post" role="form" action="" onsubmit="totallyLegit(); return false;">
					<div class="col-md-2"></div>
					<div class="col-md-8">
							<div class="col-md-4 col-sm-4">
								<label for="male" colo>Giới tính</label>
		                        <select id="male" class="form-control" name="male", placeholder="male", required="male">
		                          <option value="0">Nữ</option>
		                          <option value="1">Nam</option>
		                        </select>
		                        <br>

		                        <label for="age" colo>Tuổi tác  </label>
		                        <input id="age" type="text" class="form-control" name="age" placeholder="Tuổi" required="required">
		                        <br>

		                        <label for="education">Trình độ học vấn  </label>
		                        <select id="education" class="form-control" name="education", placeholder="education", required="required">
		                          <option value="1">Cấp 3</option>
		                          <option value="2">Tốt nghiệp Cấp 3</option>
		                          <option value="3">Cao đẳng/Đại học</option>
		                          <option value="4">Tốt nghiệp Đại học</option>
		                        </select>
		                        <br>

		                        <label for="currentSmoker">Có hút thuốc?  </label>
		                        <select id="currentSmoker" class="form-control" name="currentSmoker", placeholder="currentSmoker", required="required">
		                          <option value="0">Không</option>
		                          <option value="1">Có</option>
		                        </select>
		                        <br>

		                        <label for="cigsPerDay" colo>Số điếu thuốc mỗi ngày  </label>
		                        <input type="text" class="form-control" name="cigsPerDay" placeholder="Số điếu" required="required">
		                        <br>
		                    </div>
		                    <div class="col-md-4 col-sm-4">
		                        <label for="BPMeds">Có dùng thuốc huyết áp?  </label>
		                        <select id="BPMeds" class="form-control" name="BPMeds", placeholder="BPMeds", required="required">
		                          <option value="0">Không</option>
		                          <option value="1">Có</option>
		                        </select>
		                        <br>

		                        <label for="prevalentStroke">Tiền sử đột quỵ  </label>
		                        <select id="prevalentStroke" class="form-control" name="prevalentStroke", placeholder="prevalentStroke", required="required">
		                          <option value="0">Không</option>
		                          <option value="1">Có</option>
		                        </select>
		                        <br>

		                        <label for="prevalentHyp">Huyết áp cao  </label>
		                        <select id="prevalentHyp" class="form-control" name="prevalentHyp", placeholder="prevalentHyp", required="required">
		                          <option value="0">Không</option>
		                          <option value="1">Có</option>
		                        </select>
		                        <br>

		                        <label for="diabetes">Béo phì </label>
		                        <select id="diabetes" class="form-control" name="diabetes", placeholder="diabetes", required="required">
		                          <option value="0">Không</option>
		                          <option value="1">Có</option>
		                        </select>
		                        <br>

		                        <label for="totChol" colo>Chỉ số cholesterol toàn phần  </label>
		                        <input type="text" class="form-control" name="totChol" placeholder="mg/dL" required="required">
		                        <br>
		                    </div>
							<div class="col-md-4 col-sm-4">
		                        <label for="sysBP" colo>Huyết áp tâm thu  </label>
		                        <input type="text" class="form-control" name="sysBP" placeholder="mmHg" required="required">
		                        <br>
		                        
		                        <label for="diaBP" colo>Huyết áp tâm trương  </label>
		                        <input type="text" class="form-control" name="diaBP" placeholder="mmHg" required="required">
		                        <br>

		                        <label for="BMI" colo>Chỉ số khối cơ thể (BMI)  </label>
		                        <input type="text" class="form-control" name="BMI" placeholder="BMI" required="required">
		                        <br>
		                        
		                        <label for="heartRate" colo>Nhịp tim thất  </label>
		                        <input type="text" class="form-control" name="heartRate" placeholder="Số nhịp trên 1 phút" required="required">
		                        <br>

		                        <label for="glucose" colo>Chỉ số Glucose  </label>
		                        <input type="text" class="form-control" name="glucose" placeholder="mg/dL" required="required">
		                        <br>
							</div>
					</div>
					<div class="col-md-2"></div>
					<div class="col-md-12">
						<button type="submit" class="form-control" id="prediction-button">Dự đoán</button>
						<h2 class="text-uppercase text-center" id="prediction-result"></h2>
					</div>

				</form>


			</div>
		</div>
	</section>


	<!-- start footer -->
	<footer>
		<div class="container">
			<div class="row">
				<div class="col-md-2"></div>
				<div class="col-md-4 col-sm-4">
					<h3 class="text-uppercase">Liên hệ</h3>
					<p>
						<i class="fa fa-phone"></i> 
						<a href="093-413-6549" class="contact-link">093-413-6549</a>
					</p>
					<p>
					<i class="fa fa-envelope-o"></i> 
                    	<a href="mailto:ngthinh302@gmail.com" class="contact-link">ngthinh302@gmail.com</a>
                    </p>
				</div>
				<div class="col-md-4 col-sm-4">
					<h3 class="text-uppercase">Thông tin thêm</h3>
					<p><i class="fa fa-book"></i> 
						<a class="contact-link" rel="nofollow" 
                        	href="https://en.wikipedia.org/wiki/Coronary_artery_disease" target="_blank">Wikipedia</a>
                    </p>
                    <p><i class="fa fa-book"></i> 
                    	<a class="contact-link" rel="nofollow" 
                        	href="https://biolincc.nhlbi.nih.gov/studies/fhs/" target="_blank">Dữ liệu FHS</a>
                    </p>
			  	</div>
				<div class="col-md-12">
					<hr>
					<ul class="social-icon">
						<li><a href="https://www.facebook.com/profile.php?id=100013551768676" class="fa fa-facebook"></a></li>
						<li><a href="https://github.com/FelixNgFender/TimMachVanh" class="fa fa-github"></a></li>
					</ul>
				</div>
			</div>
		</div>
	</footer>

</body>
</html>
